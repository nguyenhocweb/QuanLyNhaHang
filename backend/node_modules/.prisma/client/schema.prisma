model Brands {
  id_brand     String         @id @default(auto()) @map("_id") @db.ObjectId
  id_b         String         @unique
  name         String         @unique
  description  String?
  logo         String?
  status       Status_Brand   @default(HOAT_DONG)
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @default(now())
  /// các liên kết bảng khác và dùng để dễ truy vấn
  owners_brand Owners_Brand[]

  @@index([createdAt], name: "idx_Brand_CreatedAd")
  @@map("brands")
}

enum Gender {
  NAM  @map("Nam")
  NU   @map("Nữ")
  KHAC @map("khác")
}

enum Status_Brand {
  HOAT_DONG       @map("Hoạt động")
  NGUNG_HOAT_DONG @map("Ngừng hoạt động")
}

model Owners_Brand {
  id_owners_brand String      @id @default(auto()) @map("_id") @db.ObjectId
  id_brand        String      @db.ObjectId
  id_user_admin   String      @db.ObjectId
  user_admin      Users_Admin @relation(fields: [id_user_admin], references: [id_user_admin])
  brand           Brands      @relation(fields: [id_brand], references: [id_brand])
  createdAt       DateTime    @default(now())
}

// tạo các role cho admin gồm admin, quản lý nhà hàng, chủ thương hiệu,  quản lý thương hiệu nếu có
//-------------------------------------------------Admin-----------------------------------------------------
model Roles_Admin {
  id_role_admin String  @id @default(auto()) @map("_id") @db.ObjectId
  id_ra         String  @unique
  name          String  @unique
  description   String?

  // thêm các bảng con để dễ hàng truy vấn
  users_admin Users_Admin[]

  //----------index---------

  @@map("roles_admin")
}

//-------------------------------------------------khách hàng-----------------------------------------------------
model Roles_KhachHang {
  id_role_KhachHang String            @id @default(auto()) @map("_id") @db.ObjectId
  id_rkh            String            @unique
  name              String            @unique
  description       String?
  /// các liên kết bảng khác và dùng để dễ truy vấn
  users_khachhang   Users_KhachHang[]

  @@map("roles_khachhang")
}

model Roles_Staff {
  id_role_staff String        @id @default(auto()) @map("_id") @db.ObjectId
  id_rt         String        @unique
  name          String        @unique
  description   String?
  /// các liên kết bảng khác và dùng để dễ truy vấn
  users_staff   Users_Staff[]

  @@map("roles_Staff")
}

// src/db/mongodb/prisma/base.prisma

generator client {
  provider        = "prisma-client-js"
  // Ở bản v5, dòng này giúp bạn dùng tính năng tách folder mà không bị lỗi
  previewFeatures = ["prismaSchemaFolder"]
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL1")
}

// tạo giới tính kiểu enum

model Users_Admin {
  id_user_admin String      @id @default(auto()) @map("_id") @db.ObjectId
  id_ud         String      @unique
  user_name     String      @unique
  name          String?
  email         String      @unique
  phone         String?
  password_hash String
  google_id     String?
  gender        Gender
  date_of_birth DateTime
  avatar        String?
  id_role_admin String      @db.ObjectId
  role          Roles_Admin @relation(fields: [id_role_admin], references: [id_role_admin])

  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @default(now())
  /// các liên kết bảng khác và dùng để dễ truy vấn
  owners_brand Owners_Brand[]

  //-----------index-------------

  @@index([phone], name: "idx_UserAdmin_Phone")
  @@index([createdAt], name: "idx_UserAdmin_CreatedAd")
  @@map("users_admin")
}

model Users_KhachHang {
  id_user_KhachHang String   @id @default(auto()) @map("_id") @db.ObjectId
  id_uk             String   @unique
  user_name         String   @unique
  name              String?
  email             String   @unique
  phone             String?
  google_id         String?
  gender            Gender
  date_of_birth     DateTime
  avatar            String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @default(now())

  id_role_KhachHang String          @db.ObjectId
  role              Roles_KhachHang @relation(fields: [id_role_KhachHang], references: [id_role_KhachHang])

  @@index([phone], name: "idx_UserkhachHang_Phone")
  @@index([createdAt], name: "idx_UserkhachHang_CreatedAd")
  @@map("users_khachhang")
}

model Users_Staff {
  id_user_staff String   @id @default(auto()) @map("_id") @db.ObjectId
  id_ut         String   @unique
  user_name     String   @unique
  name          String?
  email         String   @unique
  phone         String?
  google_id     String?
  gender        Gender
  date_of_birth DateTime
  avatar        String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @default(now())

  id_role_staff String      @db.ObjectId
  role          Roles_Staff @relation(fields: [id_role_staff], references: [id_role_staff])

  @@index([phone], name: "idx_UserStaff_Phone")
  @@index([createdAt], name: "idx_UserStaff_CreatedAd")
  @@map("users_staff")
}
